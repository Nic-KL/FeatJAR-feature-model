package de.featjar.feature.model;

import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.util.Optional;
import java.util.stream.Collectors;

import de.featjar.base.FeatJAR;
import de.featjar.base.data.Result;

public class ClearShellCommand implements IShellCommand {

	@Override
	public void execute(ShellSession session) {
		
//		List<String> cmdArg = Arrays.stream(Shell.readCommand("Enter the missing type and keys" + "1) feature model, 2) formula, 3) configuration, 4) sample, 5) list of samples, 6) full ")
//				.split("\\s+")).collect(Collectors.toList());
		
//		String type = cmdArg.get(0);
//		cmdArg.remove(0);
//		
//		session.getModel(type)
		
		List<String> cmdArg = Arrays.stream(Shell.readCommand("Enter the missing type and keys" + "1) feature model, 2) formula, 3) configuration, 4) sample, 5) list of samples, 6) full ")
				.split("\\s+")).collect(Collectors.toList());
			
		cmdArg.forEach(e -> session.getModel(e)
				.map(m -> m.remove(e))
				.ifPresentOrElse(v -> System.out.println("Removing of " + e +" Successful")
						, () -> FeatJAR.log().error("Could not find a variable named " + e)));
		
//		cmdArg.forEach(e -> session.getModel("").map(m -> m.remove(e)).ifPresentOrElse(v -> System.out.println("Entfernter Wert: " + v), () -> System.out.println("Kein Eintrag für Schlüssel " + e)));
		
		
//		switch(type) {			
//			case "1":  
//				clearKey(cmdArg, session.featureModelList);	
//				break;
//			case "2":
//				clearKey(cmdArg, session.formulaList);	
//				break;
//			case "3":
//				clearKey(cmdArg, session.configList);
//				break;
//			case "4":
//				clearKey(cmdArg, session.sampleList);
//				break;
//			case "5":
//				clearKey(cmdArg, session.listOfSampleLists);
//				break;
//			case "6":
//				break;	
//		}
	}
	
	private void cleardecision() {
		
	}
	
	private void clearKey(List<String> keys, Map<String, ?> map) {		
		if(map.isEmpty()) {
			FeatJAR.log().info("The " + map.getClass() + " is already empty", map);
			return;
		}
		keys.forEach(k -> {
			map.remove(k);
		});
		//		Optional.of(map.remove(key)).orElse(map)	
	}
	
	private void clearFull(Map<String, ?> map) {
		if(map.isEmpty()) {
			FeatJAR.log().info("The Map is already empty", map);
			return;
		}
		map.clear();		
	}
	
	@Override
    public Optional<String> getShortName() {
        return Optional.of("clear");
    }
	
	@Override
    public Optional<String> getDescription(){
    	return Optional.of("WIP");
    }
	
}
